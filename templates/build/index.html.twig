{% extends 'base.html.twig' %}

{% block title %}Build dashboard
{% endblock %}

{% block main %}
	<main class="main-show">
			<nav>
			<ul>
				<li><a href="{{path('app_user_index')}}">Utilisateurs</a></li>
				<li><a href="{{path('app_build_index')}}">Builds</a></li>
				<li><a href="{{path('app_news_adminView')}}">News</a></li>
			</ul>
		</nav>
		<h1>Build dashboard</h1>
		<form class="search-bar" method="get" action="{{ path('app_news_adminView') }}">
			<label for="keywords">Rechercher</label>
			<input type="text" name="keywords">
			<button type="submit">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search-icon lucide-search"><path d="m21 21-4.34-4.34"/><circle cx="11" cy="11" r="8"/></svg>
			</button>
			<button type="reset">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-x-icon lucide-circle-x"><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></svg>
			</button>
		</form>
		<div class="table-div">
		<table class="table">
			<thead>
				<tr>
					<th>id</th>
					<th>cpu</th>
					<th>motherboard</th>
					<th>gpu</th>
					<th>image</th>
					<th>user</th>
					<th>description</th>
					<th>cr√©er le</th>
					<th>prebuild</th>
					<th>month build</th>
					<th>prix total</th>
					<th>name</th>
					<th>action</th>
				</tr>
			</thead>
			<tbody>
				{% for build in builds %}
					<tr>
						<td>{{ build.id }}</td>
						<td>{{ build.cpu.marque }}
							{{ build.cpu.modele }}</td>
						<td>{{ build.motherboard.marque }}
							{{ build.motherboard.modele }}</td>
						{% for gpu in build.gpu %}
							<td>{{ gpu.marque }}
								{{ gpu.modele }}</td>
						{% endfor %}
							<td><img src="{{ build.image ? vich_uploader_asset(build.image, 'imageFile') : "" }}"></td>
							<td>{{ build.user.pseudo }}</td>
							<td>{{ build.description }}</td>
							<td>{{ build.createdAt|date('d/m/y H:m') }}</td>
							<td>{{ build.isPreBuild }}</td>
							<td>{{ build.monthBuild }}</td>
							<td>{{ build.totalPrice }}</td>
							<td>{{ build.name }}</td>
							<td>
								<a href="{{ path('app_build_edit', {id:build.id}) }}">modifier</a>
								<a href="{{ path('app_build_show', {id:build.id}) }}">voir</a>
							</td>
						</tr>
					{% endfor %}
				</tbody>
		</table>
		</div>
	</main>
{% endblock %}
