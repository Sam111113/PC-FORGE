{% extends 'base.html.twig' %}

{% block title %}Profile
{% endblock %}

{% block main %}
	<main class="profile">

		<section class="info">
			<div>
				<div>
					<img src="{{ user.image ? vich_uploader_asset(user.image, 'imageFile') : asset('img/placeholder/userplaceholder.jpg') }}" alt="Photo de profil">
				</div>
				<div>
					<h1>{{ user.pseudo }}
						profile</h1>
					<p>{{ user.resume }}</p>
				</div>
				<div>
					<a href="{{ path('app_user_edit', {id: user.id})}}">Modifier</a>
					<a href="{{path('app_logout')}}">Déconnexion</a>
				</div>
			</div>
			<div>
				<p>Email:
					{{ user.email }}</p>
				<p>Rejoins le :
					{{ user.createdAt|date('d/m/Y') }}</p>
			</div>
		</section>
		<section class="mes-builds">
			{% if builds %}
				<button id="left-btn">
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left-icon lucide-chevron-left"><path d="m15 18-6-6 6-6"/></svg>
				</button>
				<div class="caroussel">
					<div class="slide">
						{% for b in builds %}
						<article class="build-card">
							<div>
								{% if b.name ?? false %}
									<h3>Build
										{{ b.name }}</h3>
								{% else %}
									<h3>Build
										{{ b.cpu.marque }}</h3>
								{% endif %}
								<div><img src="{{ b.image ? vich_uploader_asset(b.image, 'imageFile') : asset('img/placeholder/prebuild.png') }}" alt="Build"></div>
								<a href="{{ path('app_build_show', {id: b.id}) }}">Voir le build</a>
							</div>
							<div>
								<div>
								<h3>Processeur :</h3>
									<p>{{ b.cpu.marque }}
										{{ b.cpu.modele }}</p>
								</div>

								{% for gpu in b.gpu %}
									<div>
									<h3>Carte graphique :</h3>
										<p>{{ gpu.marque }}
											{{ gpu.modele }}</p>
									</div>
								{% endfor %}
								<div>
								<h3>Prix total :</h3>
									<p>{{ b.totalPrice }}</p>
								</div>
								<div>
								Créer le :
									<p>{{ b.createdAt|date('d/m/Y') }}</p>
								</div>
							</div>
						</article>
						{% endfor %}
					</div>
				</div>
				<button id="right-btn">
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
				</button>
			{% else %}
				<a href="{{ path('app_forge')}}">Forge</a>
			{% endif %}
		</section>
	</main>
{% endblock %}
